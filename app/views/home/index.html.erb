<h1>All Active Users</h1>
<%= link_to "Add New Manager", new_user_path if can? :create_user, User%>
<%= link_to "Edit Profile", edit_user_path(current_user) if can? :update, current_user %>   
<%= link_to "Logout", destroy_user_session_path, data: {
  turbo_method: :delete,
  turbo_confirm: "Are you sure for logout?"
}%>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
<div class="container-fluid">
  
  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav">
      <a class="nav-link active" aria-current="page" href="#">Projects</a>
      <a class="nav-link" href="#">Projects</a>
      <a class="nav-link" href="#">Projects</a>
      <a class="nav-link" href="#">Projects</a>
      </div>
  </div>
  <%= link_to "Logout", destroy_user_session_path, data: {
    turbo_method: :delete,
    turbo_confirm: "Are you sure for logout?"
  }, class: 'btn btn-danger'%>
</div>
</nav>
<div class = "container" style ="margin-top: 30px">
<h2 class="head-text mt-6">All Active Users</h2>   

<table border="10" frame="VOID" rules="ALL" class="table table-striped">
  <tr>
    <th>User Name</th>
    <th>Role</th>
    <th> <%= "Action" if current_user.roles.first.name == "admin"%></th>
  </tr>
  <% @users.each do |user| %>
  <tr>
    <td>
      <%= user.name %>
    </td>
    <td>
      <%= user.roles.first.name %>
    </td><td>
    <% if (can? :change_user_role, user) && (current_user.id != user.id)%>
      <ul>
        <li>
          <%= link_to "Edit Role", edit_user_path(user) %>
        </li>
      </ul>
      <% end%>
    </td>
    <td>
      <%= link_to "Edit", edit_user_path(user), class: 'btn btn-primary' if can? :update, user%>
    </td>
  </tr>
    
  <% end %>
</table>

<%= link_to "Project", class: 'btn btn-primary', controller:"projects",action: "index" %> 

<%= link_to "Add New Manager", new_user_path ,class: 'btn btn-primary' if can? :create_user, User%> 
</div>