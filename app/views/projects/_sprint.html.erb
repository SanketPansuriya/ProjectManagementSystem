<%  task_percentage = 0
    completed = sprint.tasks.where("tasks.status = 'Done'").count
    total = sprint.tasks.count
    task_percentage = (completed.to_f/total)*100 unless total == 0
%>
<div class="row">
  <div class="col-sm-6" id="<%=dom_id sprint%>">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title h2"><%= sprint.title %></h4>
        <small>Start At: <%= sprint.created_at.strftime('%d-%m-%y') %></small>
        <small>Expected End At: <%= sprint.expected_end_date&.strftime('%d-%m-%y') %></small><br>
        <p class="card-text text-muted">
          <%=h truncate(sprint.description, length: 100) %>
        </p>
        <p class='card-text text-info'>Total Task: <%= total%></p>
        <div class="progress">
          <div class="progress-bar" role="progressbar" style="width: <%=task_percentage%>%" aria-valuenow="<%= task_percentage%>%" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <div class="btn-group btn-group-sm">
          <%= link_to "View Task", project_task_index_path(project), class:"btn btn-outline-info mr-2"%>
          <%= link_to "Edit", edit_project_sprint_path(project_id: project,id:sprint), class:"btn btn-outline-warning mr-2" if can? :update, @project%>
          <%= link_to "Destroy", project_sprint_path(project_id: project,id:sprint),class:"btn btn-outline-danger", data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } if can? :destroy, @project%>
        </div>
      </div>
    </div>
  </div>
</div>
